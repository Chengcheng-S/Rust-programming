# std::dbg

```rust
macro_rules! dbg{
	()=>{};
	($val:expr)=>{...};
	($($val:expr),+ $(,)?)=>{};
}
```

打印并返回给定表达式的值，以便进行快速调试

```rust
fn main(){ 
	let a=3; 
	let b=dbg!(a*3)+1;
	println!("{}",b); 
}  
```

res：

```
[main.rs:3] a*3=9
10
```

宏的工作原理是使用给定表达式类型的调试实现将值与宏调用的源位置以及表达式的源代码一起打印到stderr。

**对表达式调用宏会在返回未更改的表达式之前移动并获取其所有权。如果表达式的类型不实现Copy，并且不想放弃所有权，那么可以使用dbg!来代替它**（&expr）用于某些表达式。

请注意，宏是作为调试工具使用的，因此应避免在版本控制中长时间使用它。涉及调试输出的用例应该添加到版本控制中，这样的宏可以更好地服务于`debug!` 

### Stability

不应依赖此宏打印的确切输出，并可能在将来更改。

### panics

如果写入`io::stderr`  则panic

使用无值的dbg!()  ，只要文件行达到时自动输出

dbg!(…)多个值，它将它们视为一个元组（并返回它）：

根据在宏调用中忽略尾随逗号的约定，带有尾随逗号的单个参数仍不会被视为元组。如果需要，可以直接使用1元组：

```rust
assert_eq!((1,), dbg!((1u32,))); 
```