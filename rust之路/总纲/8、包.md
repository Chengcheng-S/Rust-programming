# 包

## 模塊系統

- 包(package)一個用於構建、測試並分享單元包的Cargo功能
- 單元包(crate)一個用於生成庫或可執行文件的樹形模塊結構
- 模塊(module)use 關鍵字:控制文件結構，作用域以及路徑的私有性
- 路徑(path)：一種用於命名條目的方法，包括結構體、函數和模塊等

## 包和單元包

單元包可以被用於生成二進制程序或庫，Rust編譯時所使用的入口文件稱作這個單元包的根節點，同時也是單元包的根模塊，

包則是由一個或者多個提供相關功能的單元包集合而成，配置文件`Cargo.toml`描述了如何構建單元包的信息

包所包含的文件：

1. 只能擁有最多一個庫單元包
2. 多個二進制文件單元包
3. 至少一個單元包(庫單元包或二進制單元包)

執行cargo new 命令 Cargo會生成一個包並創建對應的Cargo.toml文件，Cargo 默認把`src/main.rs`視爲一個二進制單元包的根節點，這個二進制單元包和包有相同的名稱

若包的目錄中包含文件`src/lib.rs`，Cargo會自動視作與包同名的庫單元包的根節點，Cargo會在構建庫和二進制程序時將這些單元包的根文件作爲參數傳遞給`rustc`

最初生成的包只包含源文件`src /mian.rs`,意味著她只是一個二進制單元包。假設包中同時存在`src/main.rs`和`src/lib.rs`那麽其中一個問二進制單元包，一個為庫單元包

單元寶可以將相關的功能分組，並放置到同一作用域下，如此便可以輕鬆的在多個項目中所使用，可以指明某個功能的來源，避免重複命名

## 模塊

模塊以及模塊系統，包含可以爲條目命名的路徑，將路徑引入作用域的`use`關鍵字，以及將條目公開的`pub`關鍵字.

模塊允許開發者將單元包内的代碼按照可讀性和易用性來進行分組，，允許控制條目的私有性，換言之，模塊決定了一個條目是否可以被外部代碼使用，或者不對外暴露

使用`cargo new --lib name` 來創建一個名爲name的庫，

以mod關鍵字開頭來聲明一個模塊，然後指明該模塊的名字,`{}` 中可以包含子模塊或者其他條目(struct, enum, const, trait)

```
mod name{
// do something
}
```

通過模塊可以將相關的定義放到一組，並根據他們的關係指定又意義的名稱

`src/main.rs` `src/lib.rs`成爲單元包的根節點，因爲這兩個包各自組成了一個名爲crate的模塊，並位於單元包模塊結構的根源，這個模塊也被稱爲模塊樹

當模塊A被包含在了模塊B中，將模塊A稱爲模塊B的子節點，并將模塊B稱爲模塊A的父節點。注：整個模塊樹都被放置在一個名爲`crate`的隱式模塊下

### 模塊中的條目路徑

爲了在Rust的模塊樹中找到某個條目，就像想類似於文件系統中的路徑進行導航的方式

路徑的形式：

-  使用單元包或字面量`crate`從根節點開始的絕對路徑
- 使用`self` ，`super`或内部標識符從當前模塊開始的相對路徑

絕對路徑與相對路徑都由至少一個標識符組成，標識符之間使用雙冒號分隔

```rust
src/lib.rs
mod front{
	mod host{
		fn add(){
		//do something
		}
	}
pub fn res(){   //  該方法是共有的 外部可以訪問的
   // 絕對路徑‘
   crate::front::host::res();
   
   //相對路徑
   front::host::res();
}
}
```

模塊不僅被用於組織代碼，同時還定義了Rust中的私有邊界，外部的代碼無法知曉，調用或依賴那些私有邊界封裝實現的細節。

Rust中的所有的條目默認都是私有的，處於父級模塊是無法訪問子模塊中的私有條目的，但是子模塊是可以使用父級模塊的條目

### 模塊的共有

使用關鍵字`pub`實現了模塊的共有，外部可以訪問該模塊

```go

pub mod myproject{
   pub mod host{
        pub  fn adds(x:i32)->i32{
           x+3
   }
     }

    pub mod Add{
        pub fn jians(x:i32,y:i32)->i32
        {
            let z=x-y;
            z
        }

    }
}
```

注： 外部訪問模塊的話 該模塊所有的字段必須是`pub`，否則編譯錯誤

### super關鍵字

Rust允許我們從父級模塊構建相對路徑，這個方法需要從路徑的起始処使用`super`關鍵字，類似於文件系統中使用`..`開始一段路徑

### 結構體

結構體和枚舉都可以使用`pub`關鍵字 聲明為公共的，在定義結構體時，聲明`pub`其本身成爲公共的結構體，但是他的字段還是私有的。 枚舉聲明為公共的，所有的變體都自動變成了公共的

由於所有的枚舉變體都在公共可用時才能實現最大的功效，因此枚舉變體默認都是公共的，對於結構體而言，即便部分字段是默認的，除非被標記為`pub`

### 路徑引入

使用`use`關鍵字將路徑引入作用域，并向本地條碼一項調用路徑中的條目(需要遵循私有性的規則)

```rust
use myprojec::Person;
let p=Person::new(String::from("jack"),72);

let x= p.showage();
    
```

### 別名

使用關鍵字`as`指定一個新的本地名稱，即 別名

```rust
use myprojec::myproject::host::Add::jians as ji;
```

### 衝導出名稱

之前使用了`use`將路徑引入作用域，這個名稱會以私有的方式在新的作用域中生效，`pub use`可以讓外部的程序訪問到這些名稱

















